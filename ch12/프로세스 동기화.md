```
목차 
동기화란
	- 동기화의 의미
	- 생산자와 소비자 문제 
	- 공유 자원과 임계구역 
동기화 기법 
	-
```

## 동기화란 

프로세스들은 공동의 목적을 올바르게 수행하기 위해 서로 협력하며 영향을 주고받는다.
협력하는 가운데 프로세스들의 실행 순서와 자원의 일관성을 보장해야하기에 반드시 `동기화` 되어야 한다.


### 동기화의 의미
---
프로그램별로 여러개의 프로세스가 존재한다. 
작업들 사이에 수행 시기를 맞추는 것을 `동기화` 라고 한다.
여러개의 프로세스는 독립적인 프로세스이지만 공동의 목표가 있기에 동기화는 필수이다.
동기화에는 `실행 순서 제어` 동기화 `상호 배제 `동기화가 있다. 
#### 실행 순서 제어 동기화 

![[image/chapter12/프로세스동기화-1.jpeg]]
입력과 읽어오기 프로세스는 워드프로세서 내 프로그램을 동작시키는 프로세스들이다.
입력이 아무것도 없는데 읽어올 수 없기때문에 상호간 순서가 존재한다. 

#### 상호 배제 동기화 

![[프로세스동기화-2.jpeg]]

각 프로세스 별로 동시에 접근해서는 안되는 자원이 존재한다. 
위 사진과 같은 상황에서 동시에 접근한다면 수많은 오류를 출력할 수 있기에 상호배제를 위한 동기화가 필요하다. 


### 생산자와 소비자 문제 
![[image/chapter12/프로세스동기화-3.png]]

상호 배제를 위한 동기화와 관련한 문제로 `생산자와 소비자 문제`가 있다. 
생산자 프로세스와 소비자 프로세스를 동시에 똑같이 실행해도 결과값이 유지되지 않는다.
레이스 컨디션은 두 개 이상의 프로세스 혹은 스레드가 공유 자원을 서로 사용하려고 경합(Race)하는 현상을 의미한다.
레이스 컨디션으로 인해 발생한 문제이다. 

### 공유 자원과 임계구역 
프로세스들이 공동의 자원을 두고 작업하는 경우 이런 자원을 `공유 자원`이라고 한다.
공유 자원에 접근하는 코드 영역을 `임계 구역` 이라고한다. 
두 개 이상의 프로세스가 임계구역에 진입하고자 하면 하나만 접근하고 나머지는 대기한다.
레이스 컨디션 문제는 고급언어에서 저급언어로 변환할때 발생한다. 
저급언어 여러줄에서 문맥교환이 일어나기에 해당 문제가 발생한다. 
![[image/chapter12/프로세스동기화-4.jpeg]]
운영체제는 해당 문제를 막기위해 상호 배제 , 진행 ,유한 대기를 사용한다. 
상호배제 : 임계 구역에 진입한 프로세스가 있다면 다른 프로세스는 들어올 수 없다.
진행 : 임계구역에 어떤 프로세스도 없다면 진입하고자 하는 프로세스는 들어간다.
유한 대기 : 한 프로세스가 임계구역에 진입하고 싶다면 언젠간 들어간다. 


## 동기화 기법 
동기화가 어떻게 이루어지는지 대표적인 도구를 통해 알 수 있다.
대표적인 도구로는 `뮤테스 락`,  `세마포`, `모니터` 가 있다. 

### 뮤테스 락 
![[image/chapter12/프로세스동기화-5.jpeg]]

잠고 들어간다. 잠금을 계속 확인한다. 잠금을 푼다
잠금을 계속확인하며 대기하기에 이를 `바쁜 대기` 라고한다. 
### 세마포 
뮤테스 락 방식과 동일하지만 공유 자원이 여러개인 상황을 의미한다.
`wait`과 `signal`을 사용하며 wait과 acuire의 차이는 공유자원을 하나 감소시키는 것이다.
세마포 방식또한 바쁜대기를 하는데 이는  cpu 주기를 낭비 하는 문제가 있다.
![[image/chapter12/프로세스동기화-6.jpeg]]
세마포방식은 바쁜대기를 극복하기 위해 `sleep`과 `wakeup` 기능을 사용한다. 
### 모니터 


