생성일 | 2024.01.25
작성자 | 이지현
# 12-1 동기화란

### 요약
- 동기화는 특정 자원에 접근할 때 한 개의 프로세스만 접근하게 하거나 프로세스를 올바른 순서대로 실행하게 하는 것을 의미한다.
- 공유 자원은 공동으로 사용하는 자원으로, 전역 변수, 파일, 입출력장치 혹은 보조기억장치가 될 수도 있다.
- 임계 구역은 공유 자원에 접근하는 코드 중 동시에 실행하면 문제가 발생하는 코드 영역을 의미한다. 임계 구역에 진입한 프로세스가 있다면 다른 프로세스는 임계 구역 밖에서 기다려야 한다.
- 상호 배제는 한 프로세스가 임계 구역에서 작업 중이면 다른 프로세스가 임계 구역에 들어갈 수 없도록 제어하는 것이다.

---

> 협력하여 실행되는 프로세스들은 실행 순서와 자원의 일관성을 보장해야 하기 때문에 반드시 동기화(synchronization)되어야 한다.

## 동기화의 의미

- 동기화: 정보, 통신 분야에서의 동기화란 작업들 사이의 수행 시기를 맞추는 것. 즉, 프로세스들 사이의 수행 시기를 맞추는 것.
	- 실행 순서 제어: 프로세스를 올바른 순서대로 실행하기
	- 상호 배제: 동시에 접근해서는 안 되는 자원에 하나의 프로세스만 접근하게 하기
### 실행 순서 제어를 위한 동기화

Reader와 Writer라는 프로세스의 경우, Writer의 프로세스가 끝나야 Reader의 프로세스가 실행해야 한다. 이때, Book.txt안에 값이 존재한다라는 특정 조건이 만족되어야 실행할 수 있도록 한다.
-> 이렇게 동시에 실행되는 프로세스를 올바른 순서대로 실행하는 것

### 상호 배제를 위한 동기화

상호 배제: 공유가 불가능한 자원의 동시 사용을 피하기 위해 사용하는 알고리즘.

- A프로세스 과정
	1. 계좌의 잔액을 읽어 들인다.
	2. 읽어 들인 잔액에 2만원을 더한다.
	3. 더한 값을 저장한다.
- B프로세스 과정
	1. 계좌의 잔액을 읽어 들인다.
	2. 읽어 들인 잔액에 5만원을 더한다.
	3. 더한 값을 저장한다.

> 동기화가 이루어지지 않은 경우

A프로세스가 계좌 잔액을 읽고, 2만원을 더한 값을 저장하기 전에 문맥 교환이 이뤄진다면, B의 프로세스에서 계좌 잔액은 A 프로세스가 실행되기 전의 잔액과 같아진다.

> 동기화가 이루어진 경우

둘 중 한 프로세스가 잔액에 접근했을 때 다른 프로세스는 기다려야 한다.

---

## 생산자와 소비자 문제

생산자
```
producer(){
	버퍼에 데이터 삽입
	총합 변수 1 증가
}
```


소비자
```
consumer(){
	버퍼에서 데이터 빼내기
	총합 변수 1 감소

}
```

코드
```
총합 = 10
producer, consumer 스레드 실행 후 합계 : ???
```

---

## 공유 자원과 임계 구역

- 공유 자원: 동시에 실행되는 프로세스들은 공동의 자원을 두고 작업을 했다. 이러한 자원을 공유 자원이라고 하며, 전역 변수, 파일, 입출력장치, 혹은 보조기억장치가 될 수도 있다.
- 임계 구역: 동시에 실행하면 문제가 발생하는 자원에 접근하는 코드 영역
	- 즉, 두 개 이상의 프로세스가 임계 구역에 진입하고자 하면 둘 중 하나는 대기해야 한다.
- 레이스 컨디션: 잘못된 실행으로 인해 여러 프로세스가 동시 다발적으로 임계 구역의 코드를 실행하여 문제가 발생하는 경우

---

## 상호 배제를 위한 동기화에서 반드시 지켜야 하는 세 가지 원칙

- 상호 배제: 한 프로세스가 임계 구역에 진입했다면 다른 프로세스는 임계 구역에 들어올 수 없다.
- 진행: 임계 구역에 어떤 프로세스도 진입하지 않았다면 임계 구역에 진입하고자 하는 프로세스는 들어갈 수 있어야 한다.
- 유한 대기: 한 프로세스가 임계 구역에 진입하고 싶다면 그 프로세스는 언젠가는 임계 구역에 들어올 수 있어야 한다. 즉, 무한정 대기해서는 안 된다.


----
### 퀴즈

디스커션 링크: