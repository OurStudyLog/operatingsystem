생성일 | 2024.01.25
작성자 | 이지현
# 12-2 동기화 기법

### 요약
- 뮤텍스 락은 임계 구역을 잠금으로써 프로세스 간의 상호 배제를 이룬다.
- 세마포는 공유 자원이 여러 개 있는 임계 구역 문제도 해결할 수 있는 동기화 도구이다.
- 모니터는 세마포에 비해 사용자가 사용하기 편리한 동기화 도구로 조건 변수를 사용한다.A

---
## 뮤텍스 락

뮤텍스 락(Mutex Lock: MUTual EXclusion lock): 동시에 접근해서는 안 되는 자원에 동시에 접근하지 않도록 만드는 도구, 즉 상호 배제를 위한 동기화 도구이다.
- 자물쇠 역할: 프로세스들이 공유하는 전역 변수 lock
- 임계 구역을 잠그는 역할: acquire 함수
	- lock이 false라면 임계 구역을 반복적으로 확인(빠른 대기)
	- 임계 구역이 열려있다면 lock을 true로 교체
- 임계 구역의 잠금을 해제하는 역할: release 함수

프로세스는
- 락을 획득할 수 없다면(임계 구역 진입 불가) 무작정 기다리고,
- 락을 획득할 수 있다면(임계 구역 진입 가능) 임계 구역을 잠근 뒤 임계 구역에서의 작업을 진행
- 임계 구역에서 빠져나올 땐 다시 임계 구역을 잠금 해제

---

## 세마포

세마포(semaphore): 뮤텍스 락보다 좀 더 일반화된 방식의 동기화 도구로 공유 자원이 여러 개 있는 상황에서도 적용이 가능하다.
	- 이진 세마포
	- 카운팅 세마포

- 임계 구역에 진입할 수 있는 프로세스의 개수(=== 사용 가능한 공유 자원의 개수)를 나타내는 전역 변수 S
- 임계 구역에 들어가도 좋은지, 기다려야 할지를 알려주는 wait 함수
- 임계 구역 앞에서 기다리는 프로세스에 '이제 가도 좋다'고 신호를 주는 signal 함수

뮤텍스 락과 세마포의 단점: 사용할 수 있는 공유 자원이 없는 경우에도 프로세스는 무작정 무한히 반복하며 S를 확인해야 한다. 빠른 대기를 반복하며 확인할 시간을 낭비하는 것은 즉, CPU를 낭비한다는 것.

-> 더 좋은 방법?

1. 사용할 수 있는 자원이 없을 경우, 해당 프로세스 상태를 대기 상태로 만들고, 해당 프로세스의 PCB를 세마포를 위한 대기 큐에 넣는다.
2. signal 함수를 호출하면 대기 중인 프로세스를 대기 큐에서 제거, 프로세스 상태를 준비 상태로 변경한 뒤 준비 큐로 옮겨준다.

> 세마포의 변수 S를 0으로 두고 먼저 실행할 프로세스 뒤에 signal 함수, 다음에 실행할 프로세스 앞에 wait 함수를 붙이면 실행 순서를 원하는 대로 제어할 수 있다.


---

## 모니터

모니터: 사용자가 사용하기 편리한 도구. 
- 공유 자원과 공유 자원에 접근하기 위한 인터페이스를 묶어서 관리한다.
- 프로세스는 반드시 인터페이스를 통해서만 공유 자원에 접근하도록 한다.

- 조건 변수: 프로세스나 스레드의 실행 순서를 제어하기 위해 사용하는 특별한 변수
	1. 특정 프로세스가 아직 실행될 조건이 되지 않았을 때에는 wait를 통해 실행을 중단한다.
	2. 특정 프로세스가 실행될 조건이 충족되었을 때에는 signal을 통해 실행을 제개한다.


----
### 퀴즈

디스커션 링크: