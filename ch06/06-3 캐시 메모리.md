생성일 | {{2023-12-26}}
작성자 | 김동욱
# 06-3 캐시 메모리

### 요약
- 저장 장치 계층 구조는 각기 다른 용량과 성능의 저장 장치들을 계층화하여 표현한 구조이다.  
- 캐시 메모리는 CPU의 연산 속도와 메모리 접근 속도의 차이를 줄이기 위한 저장 장치이다.  
- 캐시 적중률이 높으면 CPU의 메모리 접근 횟수를 줄일 수 있다.  
- 캐시 메모리는 참조 지역성의 원리에 따라 데이터를 예측하여 캐시 적중률을 높인다.

---
## 저장 장치 계층 구조  
  
- CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느리다.  
- 속도가 빠른 저장 장치는 저장 용량이 작고, 가격이 비싸다.  
  
- 레지스터 vs 메모리(RAM) vs USB 메모리  
  - 레지스터  
  - 메모리(RAM)   
  - USB 메모리 - 낮은 가격대의 대용량 저장 장치를 원한다면 느린 속도는 감수해야 하고, 빠른 속도의 저장 장치를 원한다면 작은 용량과 비싼 가격은 감수해야 한다.  
  -  저장 장치들은 'CPU에 얼마나 가까운가'를 기준으로 계층적으로 나타낼 수 있다.  
  
---  
## 캐시 메모리  
  
- CPU와 메모리 사이에 위치한, 레지스터보다 용량이 크고 메모리보다는 빠른 SRAM 기반의 저장 장치이다,  
- CPU의 연산 속도와 메모리 접근 속도의 차이를 조금이라도 더 줄이기 위해 탄생  
- "CPU가 매번 메모리에 왔다 갔다 하는 건 시간이 오래 걸리니, 메모리에서 CPU가 사용할 일부 데이터를 미리 캐시 메모리로 가지고 와서 쓴다"  
  
- 예시  
  - [메모리에 접근] = 물건을 사러 가는 것  
  - [메모리] = 물건은 많지만 집과는 멀리 떨어져 있어 왕복이 오래 걸리는 대형 마트  
  - [캐시 메모리] = 물건이 많지는 않아도 집과 가까이 있는 편의점  
----  
## 캐시 메모리의 구조  

- 계층적 캐시 메모리 (L1-L2-L3 캐시)  
- 일반적으로 L1 캐시와 L2 캐시는 코어 내부에, L3 캐시는 코어 외부에 위치해 있다.   
- 멀티 프로세서의 캐시 메모리   
- L1, L2 캐시는 각각 프로세서에 분리되고 L3 캐시는 하나로 공유한다.  
  - 분리형 캐시 : 가장 빠른 캐시인 L1를 조금이라도 더 빠르게 만들기 위해 분류한다.  
    - L1I : 명령어만 담기 위한 L1 캐시  
    - L1D : 데이터만 담기 위한 L1 캐시  
---  
## 참조 지역성 원리  

- 캐시 메모리는 메모리보다 용량이 작다 따라서 메모리의 모든 내용을 가져다 저장할 수 없다.  

- 캐시 메모리는 CPU가 자주 사용할 법한 내용을 예측하여 저장한다.  

- 캐시 히트 : 자주 사용할 것으로 예측한 데이터가 실제로 들어맞아 캐시 메모리 내 데이터가 CPU에서 활용될 경우를 의미한다.  

- 캐시 미스 : 예측이 틀려 직접 메모리에 데이터를 가져와야 하는 경우
	- 캐시미스가 발생하면 CPU가 직접 중요한 데이터를 가져와야 하기에 캐시 메모리의 이점을 잃는다. 
	- 당연히 캐시 미스가 자주 발생할 경우 성능이 저하된다.  
  
- 캐시 적중률 : 캐시가 히트 되는 비율

- 캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)  
	-  일반적인 컴퓨터 : 85~95%  
  
- 캐시 적중률을 높이기 위해선 CPU가 사용할 법한 내용을 예측 해야 한다.
	- CPU가 사용할 법한 데이터를 예측하는 방법 : "참조 지역성의 원리"  
  
- 참조 지역성의 원리  
	- CPU가 메모리에 접근할 때의 주된 경향을 바탕으로 만들어진 원리  
		1. CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향    
		2. CPU는 접근한 메모리 공간 근처를 접근하려는 경향 (공간 지역성)
----
### 퀴즈

디스커션 링크:
