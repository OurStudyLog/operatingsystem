생성일 | 2024.01.12
작성자 | 이지현
# 04-3 명령어 사이클과 인터럽트

### 요약
- 명령어 사이클은 하나의 명령어가 처리되는 주기로, 인출, 실행, 간접, 인터럽트 사이클로 구성되어 있다.
- 인터럽트는 CPU의 정상적인 작업을 방해하는 신호이다.
- 인터럽트의 종류에는 예외와 하드웨어 인터럽트가 있다.
- 인터럽트 서비스 루틴은 인터럽트를 처리하기 위한 동작들로 이루어진 프로그램이다.

---
## 명령어 사이클

- 명령어 사이클(instruction cycle): CPU가 명령어들을 하나씩 실행하며 각각의 명령어들은 일정한 주기가 반복되며 실행된다. 즉, 프로그램 속 각각의 명령어들은 명령어 사이클이 반복되며 실행된다. 인출과 실행 사이클을 번갈아 반복하여 실행한다.
- 인출 사이클(fetch cycle): 메모리에 있는 명령어를 CPU로 가지고 오는 단계
- 실행 사이클(execution cycle): CPU로 가져온 명령어를 실행하는 단계로 제어장치가 명령어 레지스터에 담긴 값을 해석하고, 제어 신호를 발생시키는 단계
- 간접 사이클: 명령어를 실행하기 위해 메모리 접근이 더 필요한 경우 발생하는 단계
![[명령어사이클.png]]

---

## 인터럽트

- 인터럽트: CPU는 정해진 흐름에 따라 명령어를 처리해 나가지만, 간혹 이 흐름이 끊어지는 상황이 발생한다. 즉, CPU의 작업을 방해하는 신호
- 동기 인터럽트(synchronous interrupts): CPU에 의해 발생하는 인터럽트로 CPU가 실행하는 프로그래밍상의 오류와 같은 예외적인 상황에 마주쳤을 때 인터럽트. 주로 예외라고 부른다.
	- 폴트: 예외를 처리한 직후 예외가 발생한 명령어로부터 실행을 재개하는 예외
	- 트랩: 예외를 처리한 직후 예외가 발생한 명령어의 다음 명령어부터 실행을 재개하는 예외. 주로 디버깅할 때 ㅏㅅ용한다.
	- 중단: CPU가 실행 중인 프로그램을 강제로 중단시킬 수밖에 없는 심각한 오류를 발생했을 때 발생하는 예외
	- 소프트웨어 인터럽트: 시스템 호출이 발생했을 때 나타나는 예외
- 비동기 인터럽트(asynchronous interrupts): 주로 입출력장치에 의해 발생하는 인터럽트. 주로 하드웨어 인터럽트라고 부른다.

> 입출력장치는 CPU보다 속도가 현저히 느리기 때문에 CPU는 입출력 작업의 결과를 바로 받아볼 수 없다. 하드웨어 인터럽트를 사용하지 않는다면 CPU는 입출력장치의 작업을 주기적으로 확인해야 하며, 이는 CPU 사이클 낭비이다. 따라서 하드웨어 인터럽트는 입출력 작업 중에도 CPU로 하여금 효율적으로 명령어를 처리할 수 있게 한다.

- 하드웨어 인터럽트 처리 순서
	1. 입출력장치는 CPU에 인터럽트 요청 신호를 보낸다.
	2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트 여부를 확인한다.
	3. CPU는 인터럽트 요청을 확인하고 인터럽트 플래그를 통해 현재 인터럽트를 받아들일 수 잇는지 여부를 확인한다.
	4. 인터럽트를 받아들일 수 있다면 CPU는 지금까지의 작업을 스택에 백업한다.
	5. CPU는 인터럽트 벡터를 참조하여 인터럽트 서비스 루틴을 실행한다.
	6. 인터럽트 서비스 루틴 실행이 끝나면 백업해둔 작업을 복구하여 실행을 재개한다.
- 인터럽트 플래그: 하드웨어 인터럽트를 받아들일지, 무시할 지를 결정하는 플래그. 무시할 수 없는 인터럽트 요청도 있다.
- 인터럽트 서비스 루틴: 인터럽트를 처리하기 위한 프로그램. === 인터럽트 핸들러. 인터럽트를 어떻게 처리하고 작동해야 할지에 대한 정보로 이루어진 프로그램.
- 인터럽트 벡터: 인터럽트 서비스 루틴을 식별하기 위한 정보. 인터럽트 서비스 루틴의 시작 주소를 알 수 있다.
![[명령어사이클2.png]]
----
### 퀴즈

디스커션 링크: