생성일 | 2024.01.06
작성자 | 이지현
# 04-2 레지스터

### 요약
- 프로그램 카운터는 메모리에서 가져올 명령어의 주소, 명령어 레지스터는 해석할 명령어를 저장한다.
- 메모리 주소 레지스터는 메모리의 주소, 메모리 버퍼 레지스터는 메모리와 주고받을 데이터를 저장한다.
- 범용 레지스터는 데이터와 주소를 모두 저장하고, 플래그 레지스터는 연산 결과 혹은 CPU 상태에 대한 부가 정보를 저장한다.
- 스택 포인터는 스택 최상단의 위치를 저장한다.
- 베이스 레지스터에 저장된 주소는 기준 주소로서의 역할을 한다.

> 프로그램 속 명령어와 데이터는 실행 전후로 반드시 레지스터에 저장된다. 따라서 레지스터에 저장된 값만 잘 관찰해도 프로그램의 실행 흐름을 파악할 수 있다.

---
## 반드시 알아야 할 레지스터

1. 프로그램 카운터
	프로그램 카운터(PC: program counter): 메모리에서 가져올 명령어의 주소, 즉 메모리에서 읽어 들일 명령어의 주소, 명령어 포인터(IP: insturction pointer)라고도 불린다. 
2. 명령어 레지스터
	해석할 명령어, 즉 방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터
3. 메모리 주소 레지스터
	메모리의 주소를 저장하는 레지스터. CPU가 읽어 들이고자 하는 주소 값을 주소 버스로 보낼 때 주소 레지스터를 거친다.
4. 메모리 버퍼 레지스터
	메모리와 주고 받을 값(데이터와 명령어)를 저장하는 레지스터. 메모리에 쓰고 싶은 값이나 메모리로부터 전달받은 값은 메모리 버퍼 레지스터를 거친다.
![[레지스터.png]]
5. 플래그 레지스터
	연산 결과 또는 CPU 상태에 대한 부가적인 정보를 저장하는 레지스터

6. 범용 레지스터
	다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터
7. 스택 포인터
8. 베이스 레지스터

---

## 스택 주소 지정 방식
- 스택 포인터는 스택 주소 지정 방식에 사용되고 프로그램 카운터와 베이스 레지스터는 변위 주소 지정 방식에 사용된다.
- 스택 주소 지정 방식: 스택과 스택 포인터를 이용한 주소 지정 방식.
- 스택 포인터: 스택의 꼭대기를 가리키는 레지스터. 즉, 스택에 마지막으로 저장한 값의 위치를 저장하는 레지스터
- 스택 영역: 메모리 안에 스택처럼 사용할 영역이 정해져 있으며, 이를 일컫는 말.

---

## 변위 주소 지정 방식
- 변위 주소 지정 방식: 오퍼랜드 필드의 값과 특정 레지스터의 값을 더하여 유효 주소를 얻어내는 주소 지정 방식
- 오퍼랜드에 어떤 레지스터를 더하는지에 따라 상대 주소 지정 방식, 베이스 레지스터 주소 지정 방식 등으로 나뉜다.
- 상대 주소 지정 방식: 오퍼랜드와 프로그램 카운터의 값을 더하여 유효 주소를 얻는 방식
	- if 문과 유사하게 모든 코드를 실행하는 것이 아닌, 분기하여 특정 주소의 코드를 실행할 때 사용된다.
- 베이스 레지스터 주소 지정 방식: 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식
	- 베이스 레지스터: 기준 주소
	- 오퍼랜드: 기준 주소로부터 떨어진 거리

> 실제 CPU의 자세한 작동법을 관찰하고 분석하길 원한다면 상용화된 CPU 속 레지스터를 보자.


----
### 퀴즈

디스커션 링크: