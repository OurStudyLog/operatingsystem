생성일 | 2024.02.01
작성자 | 이지현
# 15-2 파일 시스템

### 요약
- 파티셔닝은 하드 디스크나 SSD처럼 용량이 큰 저장 장치를 하나 이상의 논리적인 여러 단위로 구획하는 작업
- 포매팅이란 파일 시스템을 설정하여 어떤 방식으로 파일을 저장하고 관리할 것인지를 결정하고, 새로운 데이터를 쓸 수 있게 하는 작업.
- 연속 할당은 보조기억장치 내 연속적인 블록에 파일을 할당하는 방식
- 연결 할당은 각 블록 일부에 다음 블록의 주소를 저장하여 블록들을 연결 리스트 형태로 관리하는 방식
- 색인 할당은 파일의 모든 블록 주소를 색인 블록에 관리하는 방식
- FAT 파일 시스템은 FAT를 이용하는 연결 할당 기반의 파일 시스템
- 유닉스 파일 시스템은 i-node를 이용하는 색인 할당 기반의 파일 시스템


---
## 파티셔닝과 포매팅

- 파일 시스템: 파일과 디렉터리를 보조기억장치에 일목요연하게 저장하고 접근할 수 있게 하는 운영체제 내부 프로그램.

> 보조기억장치를 사용하려면 파티션을 나누는 작업(파티셔닝)과 포맷 작업(포맷팅)을 거쳐야 한다.

- 파티셔닝: 저장 장치의 논리적인 영역을 구획하는 작업
- 파티션: 파티셔닝을 통해 나누어진 영역 하나하나를 일컫는 말.
- 포매팅: 파일 시스템을 설정하여 어떤 방식으로 파일을 저장하고 관리할 것인지를 결정하고, 새로운 데이터를 쓸 준비를 하는 작업.
	- 저수준 포매팅: 저장 장치를 생성할 당시 공장에서 수행하는 물리적인 포매팅
	- 논리적 포매팅: 파일 시스템을 생성하는 포매팅

---

## 파일 할당 방법

- 블록(=클러스터): 하나의 파일이 보조기억장치에 저장될 때는 하나 이상의 블록에 걸쳐 저장된다.

### 파일을 보조기억장치에 할당하는 방법
- 연속 할당: 보조기억장치 내 연속적인 블록에 파일을 할당하는 방식
	- 구현이 단순하지만, 외부 단편화를 야기한다.
- 불연속 할당
	- 연결 할당: 각 블록 일부에 다음 블록의 주소를 저장하여 각 블록이 다음 블록을 가리키는 형태로 할당하는 방식.
		1. 반드시 첫번째 블록부터 하나씩 차례대로 읽어야 한다.
		2. 하드웨어 고장이나 오류 발생 시 해당 블록 이후 블록은 접근할 수 없다.
	- 색인할당: 파일의 모든 블록 주소를 색인 블록이라는 하나의 블록에 모아 관리하는 방식
		- 색인 할당을 위해 파일 시스템에서는 디렉터리 엔트리에 파일 이름과 더불어 색인 블록 주소를 명시한다.

---

## 파일 시스템 살펴보기

- FAT 파일 시스템: USB 메모리, SD 카드 등의 저용량 저장 장치에 사용
- 유닉스 파일 시스템: 유닉스 계열 운영체제에서 사용

### FAT 파일 시스템
- 연속 할당의 단점을 보완한 파일 시스템.
- 파일 할당 테이블: 다음 블록 주소들을 한데 모아 테이블 형태로 관리.

`예약 영역` `FAT 영역` `루트 디렉터리 영역` `데이터 영역`

- FAT는 하드 디스크 파티션의 시작 부분에 있지만, 실행하는 도중 FAT가 메모리에 게시될 수 있다.
- FAT에 메모리에 적재된 채 실행되면 임의 접근의 성능이 개선된다.
- FAT 파일 시스템의 디렉터리 엔트리
	- `파일 이름` `확장자` `속성` `예약 영역` `생성 시간` `마지막 접근 시간` `마지막 수정 시간` `시작 블록` `파일 크기`

- [ ] FAT 상에서 파일에 접근하는 과정
### 유닉스 파일 시스템

- 색인 할당 기반의 파일 시스템. 이때 색인 블록을 i-node라고 부른다.
- i-node에는 파일 속성 정보와 열다섯 개의 블록 주소가 저장될 수 있다.
- 유닉스 파일 시스템에서 파일 정보는 i-node에 표현된다.

`예약 영역` `i-node 영역` `데이터 영역`

- 하나의 블록으로 해결할 수 없을 경우
	1. 블록 주소 중 열두 개에는 직접 블록 주소를 저장
	2. 위의 내용으로 충분하지 않다면 열세 번째 주소에 단일 간접 블록 주소를 저장
	3. 위의 내용으로 충분하지 않다면 열네 번째 주소에 이중 간접 블록 주소를 저장
		- 이중 간접 블록: 데이터 블록 주소를 저장하는 블록 주소가 저장된 블록. 즉, 단일 간접 블록들의 주소를 저장하는 블록.
	4. 위의 내용으로 충분하지 않다면 열다섯 번째 주소에 삼중 간접 블록 주소를 저장.

- [ ] 유닉스 상에서 파일에 접근하는 과정

### 저널링 파일 시스템

- 저널링 기법: 작업 로그를 통해 시스템 크래시가 발생했을 때 빠르게 복구하기 위한 방법.
- 시스템 크래시: 전원이 나가거나 치명적인 오류로 인해 컴퓨터가 강제로 종료되어 버린 상황 등

1. 작업 직전 파티션의 로그 영역에 수행하는 작업에 대한 로그를 남긴다.
2. 로그를 남긴 후 작업을 수행한다.
3. 작업이 끝났다면 로그를 삭제한다.

### 마운트

저장 장치를 마운트 한다. === 한 저장 장치의 파일 시스템에서 다른 저장 장치의 파일 시스템에 접근할 수 있도록 파일 시스템을 편입시키는 작업.


----
### 퀴즈

디스커션 링크: