
작성자 : 김용재 
## 다양한 보조기억 장치 
---
보조기억장치에는 다양한 종류가 있다.
대표적으로 하드디스크와 플래시 메모리이다.
플래시 메모리는 USB 메모리 , SD 카드 SSD 와 같은 장치를 말한다. 

### 하드 디스크 
---
![image](보조기억장치_하드디스크.png)

하드 디스크는 자기적인 방식으로 데이터를 저장하는 보조기억장치이다. 
#### 구성요소 
- 플래터 : 데이터가 저장되는 동그란 원판 
- 스핀들 : 플래터를 돌리는 요소 
-  헤드 : 플래터를 대상으로 데이터를 읽고 쓰는 구성 요소 
	![image](보조기억장치_헤드.png)
		플레터의 표면을 거드리는 것이 아닌 자성을 감지하는 것
		헤드는 플레터를 양면으로 감싸는 형태로 한쌍에 두개를 달고 있다. 
	
- 디스크 암 (액추에이터 암) : 헤드를 이동시키는 요소 
####  물리적 디스크 구조  

   ![image](보조기억장치_실린더세부.png)
- 트랙  : 플래터 위에서 동심원을 그리고 있는 단위 
		 트랙은 바깥면부터 0 > 1 > 2 ... 숫자가 붙어 있다.
		  
- 섹터(클러스터) : 트랙의 일부분 ,하드디스크의 가장 작은 전송 단위
	
- 실린더 : 여러겹의 플래터 상에서 같은 트랙이 위치한 곳을 모은 단위  
		  헤드는 플래터를 읽을 때 트랙 번호가 아닌 실린더 번호를 참조한다. 
		  실린더 단위로 연속된 정보를 기록하는데 이는 디스크암을 움직이지 않고 
		  데이터 접근에 용이하기 때문이다. 
		  
#### 데이터 접근 시간  
- 탐색 시각 : 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시킨 시간 
- 회전 지연 : 헤드가 있는 곳으로 플래터를 회전 시키는 시간
- 전송 시간 : 하드디스크와 컴퓨터 간 데이터를 전송하는 시간 





### 플래시 메모리 
---
![[보조기억장치_플래시메모리.png]]

usb메모리 ,SD카드 , SSD가 모두 플래시 메모리 기반의 보조기억장치이다. 
플래시 메모리는 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장장치이다.
플래시 메모리는 셀이라는 단위가 있다. 
셀이란 플래시 메모리에서 데이터를 저장하는 가장 작은 단위이다. 
비트를 저장하는 방식의 따라 나뉘며 SLC ,MLC , TLC 방식 등이 있다. 

#### 비트를 저장하는 방식 

- SLC : 한 셀로 1비트를 저장하여 한 셀로 2 개의 정보를 표현할 수있다. 
		수십만 번 가까이 데이터를 쓰고 지우고를 반복할 수 있다. 
		다른 타입에 비해 수명과 속도가 높다.
		다른 타입에 비해 가격이 비싸다.
- MLC : 한 셀에 2비트를 저장하여 한 셀로 4 개의 정보를 표현할 수 있다.
		 SLC 보다 수명과 속도가 떨어진다.
		 SLC 보다 대용화 하기가 유리하다. 
- TLC : 한 셀에 3비트를 저장하여 한 셀로 8 개 의 정보를 표현할 수 있다. 
		MLC보다 수명과 속도가 떨어진다.
		MLC보다 대용화 하기 유리하다. 
#### 데이터 저장 단위 

![image](보조기억장치_플래시메모리_저장단위.png)

플래시 메모리의 저장 단위로는 셀들이 모여 페이지를 이루고, 페이지가 블록, 블록이 모여 플레인, 플레인이 모여 다이를 이루고 있다.

여기서 중요한 점은, 플래시 메모리는 읽기/쓰기와 삭제를 할 때 단위가 다르다는 점이다
읽기/쓰기는 페이지 단위로 이루어지지만 삭제는 블록 단위로 이루어진다.

이 페이지 또한 상태를 가지고 있을 수 있다.
크게 Free, Valid, Invalid 상태로 나눌 수 있다.

- Free : 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
    
- Valid : 이미 유요한 데이터를 저장하고 있는 상태
    
- Invalid : 플래시 메모리는 하드 디스크와 달리 덮어쓰기가 불가능하기 때문에 유요하지 않은 데이터(쓰레기값)를 저장하고 있는 상태
    

![](보조기억장치_플래시메모리_페이지.png)

위와 같이 하나의 블록안의 하나의 페이지를 수정하려고 한다면 기존 페이지를 Invalid 상태로 바꾸고 새로운 데이터를 저장하게 된다. 하지만 계속 이렇게 사용한다면, 사용하지 않는 상태의 데이터로 인해 메모리 공간을 낭비하게 됩니다.

![](보조기억장치_플래시메모리_가비지컬렉션.png)

이 문제를 해결하기 위해 **가비지 컬렉션**이 존재한다.
이 가비지 컬렉션은 유효한 페이지들만 새로운 블록으로 복사한 후 기존 블록을 삭제하여 공간을 정리하는 기능이다.

## RAID의 정의와 종류
---
하드디스크와 SSD와 같은 저장 장치를 조금 더 효율적으로 사용하기 위해 RAID로 구성한다. 

### RAID (Redundant Array of Independent Disks)

RAID는 데이터의 안정성 혹은 높은 성능을 위해 여러 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술이다.
예를 들어 1TB 저장 장치 5개를 하나로 묶어 5TB 하나의 저장 장치로 사용하는 기술이다.
RAID는 레벨로 그 종류를 구별하며  RAID 0, RAID 1 등과 그로부터 파생된 RAID 10, RAID 50 등이 존재한다.

### RAID 0

RAID 0은 데이터를 단순히 나누어 저장하여 구성하는 방식이다.
각 하드 디스크는 번갈아 가며 데이터를 저장하게 되고 저장되는 데이터는 하드 디스크 개수만큼 나뉘어 저장된다.

![image](보조기억장치_raid0.png)

- 스트라입(stripe) : 마치 줄무늬처럼 분산되어 저장된 데이터
    
- 스트라이핑(striping) : 분산하여 저장
    

RAID 0의 장점은 입출력 속도가 향상될 수 있다.
만약 A1, A2, ... D3, D4와 같이 순차적으로 데이터를 읽는다고 가정했을 때, 각 하드 디스크에 저장된 데이터를 동시에 사용할 수 있게 된다. 
저장된 정보가 안전하지 않다는 단점이 있다.
예를 들어, 하드 디스크 하나가 고장나게 된다면 데이터가 소멸될 수 있다.

### RAID 1

RAID 1은 미러링 방식으로 이해할 수 있다.
즉, 데이터를 쓸 때 원본과 복사본 두 군데에 쓰게 된다.(느린 쓰기 속도).

![](보조기억장치_raid1.png)

RAID 1은 하드 디스크 개수가 한정되었을 때, 사용 가능한 용량이 적어질 수 있다.
즉, 복사본이 만들어진 만큼 사용할 수 없기에 많은 양의 하드 디스크가 필요하게 된다. 
RAID 1의 분명한 장점은 조금 더 안전하게 데이터를 저장할 수 있다는 점이다.

### RAID 4

RAID 1처럼 완전한 복사본을 만드는 대신 패리티 비트를 저장하는 기술이다.
패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구한다.
원래 패리티 비트는 오류 검출만 가능할 뿐 오류 복구는 불가능하지만 RAID에서 사용하는 패리티 비트는 복구까지 가능하다. 

![](보조기억장치_raid4.png)

RAID 4는 오류를 검출하고 복구할 수 있는 정보를 하드 디스크 하나에 몰아 넣어 RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관하는 방식이다.
RAID 4의 단점은 새로운 데이터를 쓸때마다 패리티 디스크에도 정보를 저장해야 하기 때문에 패리티 디스크의 병목현상이 일어날 수 있다.

### RAID 5

RAID 4의 단점을 보완하기 위해 패리티 정보를 분사하여 저장하는 방식이다.

![](보조기억장치_raid5.png)

### RAID 6

두 종류의 패리티(검출, 복구)를 사용하는 방식으로 RAID 5보다 안전하며 쓰기는 더 느리다.

---

### RAID 정리

각 RAID 레벨 마다 장단점이 존재하기 때문에 상황과 목적에 맞게 최적의 RAID 레벨은 달라질 수 있으며 각 레벨의 대략적인 구성과 특징을 아는 것이 중요하다.
