```
목차 
교착 상태란 
	- 식사하는 철학자 문제 
	- 자원 할당 그래프 
	- 교착 상태 발생 조건 
교착 상태 해결 방법 
	- 교착 상태 예방 
	- 교착 상태 회피 
	- 교착 상태 검출 후 회복 
```

## 교착 상태란 

프로세스들이 자원을 사용하보면 필요로 하는 자원이 서로 겹치게 되는 경우가 있다.
이 상황에서 무작정 기다리게되어 진행할 수 없는 상태를 `교착상태`라고 한다. 

### 식사 하는 철학자 문제 
--- 
철학자들이 원탁에 앉아 식사하는 상황을 교착상태를 비유적으로 표현하기 위해 가정했다. 
![[../image/chapter13/교착상태-1.jpeg]]
어떤 철학자도 식사를 마칠수 없게 된다. 
철학자는 프로세스 혹은 스레드 포크는 자원 생각하는 행위를 자원을 기다리는 것으로 빗대어 표현한다. 
![[../image/chapter13/교착상태-2.png]]

### 자원 할당 그래프
--- 
![[../image/chapter13/교착상태-3.jpeg]]

프로세스와 자원의 관계를 그래프로 표현하기 위해 자원할당 그래프를 사용한다.
사용가능한 자원수는 여러개일 수 있다. 
프로세스가 자원을 사용중일때는 자원에서 프로세스 방향으로 화살표를 프로세스가 자원을 기다릴때는 그 반대이다.

### 교착 상태 발생 조건 
--- 
교착상태의 발생조건은 총 4가지이다.
상호배제 :사용하고자 하는 자원은 하나의 프로세스만 사용한다.
점유와 대기 : 자원을 할당받은 상태에서 다른 자원을 할당받기 위해 기다리는 상태 
비선점 : 운영체제가 프로세스의 자원을 강제로 빼앗지 못한다.
원형 대기 : 프로세스들간의 자원할당 그래프가 원의 형태로 그려진다.


## 교착상태 해결 방법 

문제 일어나지 않도록 예방할 수있고 위험이 있다면 회피 할 수도 있고 문제가  검출되면 회복하는 방법이 있다.
교착상태또한 마찬가지로 예방 , 회피 , 회복 하는 방법이 있다. 

### 교착 상태 예방 
--- 
![[../image/chapter13/교착상태-4.png]]
상호배제 : 한 테이블에 서로 다른 그룹의 인원을 앉히는 것
점유와 대기 : 식당 A에 앉아서 식당 B 줄을 기다리는 것 
비선점 : 종업원이 나가라고 말하지 못하는 것 
원형 대기 : 식당을 가는 순서는 반드시 A , B , C 인 것 

교착상태는 예방할 수 있지만 여러 부작용이 따른다. 


### 교착 상태 회피 
--- 
![[../image/chapter13/교착상태-5.png]]

안전상태 : 모든 프로세스가 정상적으로 자원을 할당 받고 종료될 수 있는 상태  
불안전상태 : 교착상태가 발생한 상태 
안전 순서열 : 교착상태없이 안전하게 프로세스들에게 자원을 할당할 순서 


### 교착 상태 검출 후 회복 
---
#### 선점을 통한 회복 
교착상태가 해결될 떄까지 한 프로세스씩 자원을 몰아주는 방식 
교착상태가 해결될떄 까지 자원을 강제로 빼았고 한 프로세스에 할당함 

#### 프로세스 강제 종료를 통한 회복 
교착상태에 놓인 프로세스를 모두 강제 종료하거나 교착상태가 없어질때까지 한 프로세스씩 강제 종료하는 방식
모두 종료시 작업내역을 잃게 될 가능성이 높고 하나씩 종료시 오버헤드를 야기함 

#### 타조 알고리즘 
교착상태를 아예 무시해버리는 방식 